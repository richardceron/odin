<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/templates/landrover/landroverTemplate.xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="headers">
        <style>
            #map {
                width: 100%;
                height: 500px;
            }
        </style>

    </ui:define>

    <ui:define name="content">
        <div id="title-forma">
            UBICACIÃ“N
        </div>
        <div id="body-forma">
            <div id="map"></div>            
        </div>   

        <input type="hidden" id="agencia_name" value="#{siteController.agencia.nombre}" />
        <input type="hidden" id="agencia_dir" value="#{siteController.agencia.direccion}" />

        <script>

            function initMap() {
                var mapDiv = document.getElementById('map');
                var map = new google.maps.Map(mapDiv, {
                    center: {lat: #{siteController.agencia.latitud}, lng: #{siteController.agencia.longitud}},
                    zoom: 17
                });
                var contentString = "<b>";
                contentString += document.getElementById("agencia_name").value;
                contentString += "</b>";
                contentString += "<br/>";
                contentString += document.getElementById("agencia_dir").value;

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });


                var marker = new google.maps.Marker({
                    position: {lat: #{siteController.agencia.latitud}, lng: #{siteController.agencia.longitud}},
                    map: map
                });

                marker.addListener('click', function () {
                    infowindow.open(map, marker);
                });


            }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"></script>

    </ui:define>
</ui:composition>